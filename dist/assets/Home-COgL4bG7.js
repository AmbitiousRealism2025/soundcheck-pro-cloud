import{c as D,u as E,j as e,L as d,f as M,r as T,a as C,b as v,d as y,e as b,i as S,g as U,h as G,k as $,l as W}from"./index-DsEjXmEw.js";import{C as N}from"./Card-cX6znXpD.js";import{B as w,f as j}from"./dates-DLBrmLeP.js";import{M as B,S as f}from"./StatBadge-Dyf2iPqU.js";import{B as u}from"./Button-DCCwLZlP.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=D("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function R(){const l=E(),r=new Date,t=new Date(r.getTime()+7*24*60*60*1e3),n=l.filter(s=>{const a=new Date(s.date);return a>=r&&a<=t});return e.jsx(N,{title:"Upcoming Events",subtitle:"Next 7 days",children:n.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-sm opacity-60 mb-4",children:"No upcoming events. Create one!"}),e.jsx(d,{to:"/rehearsals",className:"text-primary text-sm font-medium hover:underline",children:"View all events â†’"})]}):e.jsxs("div",{className:"space-y-3",children:[n.slice(0,5).map(s=>{const a=new Date(s.date),c=M(a,{addSuffix:!0});return e.jsx(d,{to:`/${s.type==="rehearsal"?"rehearsals":"gigs"}/${s.id}`,className:"block p-3 rounded-lg hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(w,{variant:s.type==="rehearsal"?"info":"success",size:"sm",children:s.type}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.type==="rehearsal"?"eventName"in s?s.eventName:"":"venue"in s?s.venue.name:""})]}),e.jsxs("p",{className:"text-xs opacity-60",children:[j(s.date,"EEE, MMM d")," at ",j(s.date,"h:mm a")]})]}),e.jsx("div",{className:"text-xs opacity-40 whitespace-nowrap",children:c})]})},s.id)}),n.length>5&&e.jsxs(d,{to:"/rehearsals",className:"block text-center text-sm text-primary py-2 hover:underline",children:["View ",n.length-5," more â†’"]})]})})}const k=T.forwardRef(({className:l,label:r,indeterminate:t=!1,checked:n,id:s,...a},c)=>{const m=s||`checkbox-${Math.random().toString(36).substr(2,9)}`;return e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{ref:c,type:"checkbox",id:m,checked:n,className:"sr-only peer",...a}),e.jsxs("div",{className:C("w-5 h-5 rounded border-2 transition-all duration-200 flex items-center justify-center","peer-focus-visible:ring-2 peer-focus-visible:ring-primary/50 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background","peer-checked:bg-primary peer-checked:border-primary","peer-disabled:opacity-50 peer-disabled:cursor-not-allowed",!n&&!t&&"border-foreground/30 bg-transparent",t&&"bg-primary border-primary",l),children:[n&&!t&&e.jsx(F,{size:14,className:"text-primary-foreground"}),t&&e.jsx(B,{size:14,className:"text-primary-foreground"})]})]}),r&&e.jsx("label",{htmlFor:m,className:"text-sm font-medium text-foreground cursor-pointer select-none pt-0.5",children:r})]})});k.displayName="Checkbox";function V(){const{rehearsals:l,updateRehearsal:r}=v(),t=l.flatMap(s=>s.tasks.filter(a=>a.status==="open").map(a=>({...a,rehearsal:s}))),n=async(s,a)=>{a.preventDefault();const c=s.rehearsal.tasks.map(m=>m.id===s.id?{...m,status:"closed"}:m);await r({...s.rehearsal,tasks:c})};return e.jsx(N,{title:"Open Tasks",subtitle:`${t.length} remaining`,children:t.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-sm opacity-60 mb-4",children:"All caught up! ðŸŽ‰"}),e.jsx(d,{to:"/rehearsals",className:"text-primary text-sm font-medium hover:underline",children:"View rehearsals â†’"})]}):e.jsxs("div",{className:"space-y-2",children:[t.slice(0,8).map(s=>e.jsx(d,{to:`/rehearsals/${s.rehearsal.id}`,className:"block p-3 rounded-lg hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"pt-0.5",children:e.jsx(k,{checked:!1,onChange:a=>n(s,a),"aria-label":`Mark "${s.title}" as complete`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsx("p",{className:"text-xs opacity-60 truncate",children:s.rehearsal.eventName}),s.note&&e.jsx("p",{className:"text-xs opacity-40 mt-1 line-clamp-1",children:s.note})]})]})},`${s.rehearsal.id}-${s.id}`)),t.length>8&&e.jsxs(d,{to:"/rehearsals",className:"block text-center text-sm text-primary py-2 hover:underline",children:["View ",t.length-8," more tasks â†’"]})]})})}function A(){const{gigs:l}=y(),{settings:r}=b(),t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0),a=l.filter(i=>{if(!i.compensation)return!1;const o=new Date(i.date);return o>=n&&o<=s}),c=a.reduce((i,o)=>{var p;return i+(((p=o.compensation)==null?void 0:p.amount)||0)},0),m=a.filter(i=>{var o;return((o=i.compensation)==null?void 0:o.status)==="paid"}).reduce((i,o)=>{var p;return i+(((p=o.compensation)==null?void 0:p.amount)||0)},0),x=c-m,h=r.currency||"USD",g=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:h}).format(i);return e.jsx(N,{title:"Earnings This Month",subtitle:t.toLocaleDateString("en-US",{month:"long",year:"numeric"}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{label:"Total",value:g(c)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(f,{label:"Paid",value:g(m)}),e.jsx(f,{label:"Pending",value:g(x)})]}),a.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[e.jsx("p",{className:"text-xs opacity-60 mb-2",children:"Recent gigs"}),e.jsx("div",{className:"space-y-2",children:a.slice(0,3).map(i=>{var o;return e.jsxs(d,{to:`/gigs/${i.id}`,className:"flex items-center justify-between p-2 rounded hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"text-sm truncate",children:i.venue.name}),e.jsx("span",{className:"text-sm font-medium",children:g(((o=i.compensation)==null?void 0:o.amount)||0)})]},i.id)})})]}),e.jsx(d,{to:"/gigs",className:"block text-center text-sm text-primary py-2 hover:underline",children:"View all gigs â†’"})]})})}function I(){const{gigs:l}=y(),{settings:r}=b(),t=Date.now(),n=l.filter(a=>S(a.date,t)&&!!a.venue.address).sort((a,c)=>U(a.date,c.date)).slice(0,5),s=!!r.homeAddress;return e.jsx(N,{title:"Upcoming Travel",subtitle:"Gigs with location",children:n.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-sm opacity-60 mb-4",children:"No upcoming travel scheduled"}),e.jsx(d,{to:"/gigs",className:"text-primary text-sm font-medium hover:underline",children:"View gigs â†’"})]}):e.jsxs("div",{className:"space-y-3",children:[!s&&e.jsx("div",{className:"p-3 rounded-lg bg-warning/10 border border-warning/20",children:e.jsxs("p",{className:"text-xs text-warning",children:["Set your home address in"," ",e.jsx(d,{to:"/settings",className:"underline",children:"settings"})," ","to calculate distances"]})}),n.map(a=>e.jsxs(d,{to:`/gigs/${a.id}`,className:"block p-3 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:a.venue.name}),e.jsxs("p",{className:"text-xs opacity-60",children:[j(a.date,"EEE, MMM d")," at ",j(a.date,"h:mm a")]})]}),e.jsx(w,{variant:"info",size:"sm",children:a.status})]}),e.jsx("p",{className:"text-xs opacity-40 truncate",children:a.venue.address}),a.mileage&&e.jsxs("p",{className:"text-xs opacity-60 mt-1",children:["~",a.mileage.toFixed(1)," miles"]})]},a.id)),e.jsx(d,{to:"/gigs",className:"block text-center text-sm text-primary py-2 hover:underline",children:"View all gigs â†’"})]})})}function L(){const l=G(),{openModal:r}=$(),t=()=>{r("create-rehearsal"),l("/rehearsals")},n=()=>{r("create-gig"),l("/gigs")},s=async()=>{try{await W(),console.log("Data exported successfully")}catch(a){console.error("Failed to export data:",a)}};return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(u,{variant:"primary",onClick:t,className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸŽµ"}),"New Rehearsal"]}),e.jsxs(u,{variant:"primary",onClick:n,className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸŽ¤"}),"New Gig"]}),e.jsxs(u,{variant:"secondary",onClick:()=>l("/rehearsals"),className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ“…"}),"Calendar"]}),e.jsxs(u,{variant:"ghost",onClick:s,className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ’¾"}),"Export"]})]})}function Q(){const{rehearsals:l}=v(),{gigs:r}=y(),t=new Date,n=new Date(t.getTime()+7*24*60*60*1e3),s=l.filter(x=>{const h=new Date(x.date);return h>=t&&h<=n}).length,a=r.filter(x=>new Date(x.date)>=t).length,c=t.getHours(),m=c<12?"Good morning":c<18?"Good afternoon":"Good evening";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"glass rounded-xl p-6 md:p-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:[m,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-lg opacity-80 mb-6",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-xs opacity-40",children:"rehearsals"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-xs opacity-40",children:"gigs"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:l.length}),e.jsx("p",{className:"text-xs opacity-40",children:"rehearsals"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-xs opacity-40",children:"gigs"})]})]}),e.jsx(L,{})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(R,{})}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(V,{})}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(A,{})}),e.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:e.jsx(I,{})})]})]})}export{Q as default};
