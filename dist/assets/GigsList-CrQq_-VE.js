import{j as e,L as P,r as g}from"./index-B-6H1DbC.js";import{b as Y,c as $,f as I,B as V,e as h,d as q}from"./Button-BYcCY_pn.js";import{C as J}from"./Card-D71wzUUu.js";import{I as i,S as R,o as b,n as j,s as o,e as z,u as K,M as Q,b as W}from"./types-DfFo2rcE.js";import{T as X}from"./Textarea-DCv1eOk_.js";const E=["from-purple-500/20 to-pink-500/20","from-blue-500/20 to-cyan-500/20","from-green-500/20 to-emerald-500/20","from-orange-500/20 to-red-500/20","from-indigo-500/20 to-purple-500/20"];function Z({gig:a}){const{deleteGig:c}=Y(),{settings:p}=$(),x=parseInt(a.id.slice(-1),36)%E.length,d=E[x],t=async n=>{n.preventDefault(),window.confirm(`Delete gig at "${a.venue.name}"? This cannot be undone.`)&&await c(a.id)},m=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:p.currency||"USD"}).format(n),f={pending:"default",confirmed:"info",completed:"success",cancelled:"error"};return e.jsx(P,{to:`/gigs/${a.id}`,children:e.jsxs(J,{className:`group hover:scale-[1.02] transition-transform bg-gradient-to-br ${d} relative overflow-hidden`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold truncate mb-1",children:a.venue.name}),e.jsxs("p",{className:"text-sm opacity-80",children:[I(a.date,"EEE, MMM d")," at ",I(a.date,"h:mm a")]}),a.venue.address&&e.jsx("p",{className:"text-xs opacity-60 mt-1 truncate",children:a.venue.address})]}),e.jsx(V,{variant:f[a.status],size:"sm",children:a.status})]}),a.compensation&&e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"px-3 py-1 rounded-full bg-white/10 backdrop-blur-sm",children:e.jsx("span",{className:"text-sm font-medium",children:m(a.compensation.amount)})}),a.compensation.status==="paid"&&e.jsx(V,{variant:"success",size:"sm",children:"Paid"})]}),a.venue.address&&e.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-60 mb-3",children:[e.jsx("span",{children:"ðŸ“"}),e.jsx("span",{children:"Has location"}),a.mileage&&e.jsxs("span",{children:["â€¢ ",a.mileage.toFixed(1)," mi"]})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(h,{size:"sm",variant:"danger",onClick:t,className:"w-full",children:"Delete"})})]})})}function _({search:a,onSearchChange:c,statusFilter:p,onStatusFilterChange:x}){const d=[{value:"all",label:"All"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{type:"search",placeholder:"Search gigs...",value:a,onChange:t=>c(t.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs opacity-60 mb-2 block",children:"Filter by status"}),e.jsx(R,{options:d,value:p,onChange:t=>x(t)})]})]})}const ee=b({name:o().min(1,"Venue name is required").max(100),address:o().max(300).optional(),contact:o().max(100).optional()}),ae=b({amount:j().min(0,"Amount must be positive"),currency:o().default("USD"),status:z(["pending","paid"]).default("pending"),paidAt:j().optional(),method:o().optional()}),L=b({date:o().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}/,"Date must be in ISO8601 format (YYYY-MM-DDTHH:mm)"),callTime:o().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}/,"Call time must be in ISO8601 format").optional(),venue:ee,compensation:ae.optional(),status:z(["pending","confirmed","completed","cancelled"]).default("pending"),notes:o().optional(),mileage:j().min(0).optional()}),se=L;L.partial().extend({id:o()});function ie(){var N,C,S,w,T,G,D,M,k,A,F;const{gigs:a,loadGigs:c,addGig:p}=Y(),{activeModal:x,openModal:d,closeModal:t}=q(),[m,f]=g.useState(""),[n,U]=g.useState("all");g.useEffect(()=>{c()},[c]);const{register:l,handleSubmit:B,formState:{errors:r},reset:H}=K(se,{defaultValues:{date:"",callTime:"",venue:{name:"",address:"",contact:""},compensation:{amount:0,currency:"USD",status:"pending"},status:"pending",notes:""}}),O=async s=>{const u=Date.now(),v={id:W("gig"),date:s.date,callTime:s.callTime,venue:s.venue,compensation:s.compensation.amount>0?s.compensation:void 0,status:s.status||"pending",notes:s.notes,createdAt:u,updatedAt:u};await p(v),H(),t()},y=g.useMemo(()=>a.filter(s=>{const u=s.venue.name.toLowerCase().includes(m.toLowerCase()),v=n==="all"||s.status===n;return u&&v}).sort((s,u)=>s.date.localeCompare(u.date)),[a,m,n]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gigs"}),e.jsx(h,{variant:"primary",onClick:()=>d("create-gig"),children:"New Gig"})]}),e.jsx(_,{search:m,onSearchChange:f,statusFilter:n,onStatusFilterChange:U}),y.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-lg opacity-60 mb-4",children:m||n!=="all"?"No gigs match your filters":"No gigs yet. Create your first one!"}),e.jsx(h,{variant:"primary",onClick:()=>d("create-gig"),children:"New Gig"})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:y.map(s=>e.jsx(Z,{gig:s},s.id))}),e.jsx(Q,{open:x==="create-gig",onClose:t,title:"Create New Gig",children:e.jsxs("form",{onSubmit:B(O),className:"space-y-4",children:[e.jsx(i,{label:"Venue Name",...l("venue.name"),error:(C=(N=r.venue)==null?void 0:N.name)==null?void 0:C.message,placeholder:"Blue Note Jazz Club"}),e.jsx(i,{label:"Venue Address (optional)",...l("venue.address"),error:(w=(S=r.venue)==null?void 0:S.address)==null?void 0:w.message,placeholder:"123 Main St, New York, NY"}),e.jsx(i,{label:"Venue Contact (optional)",...l("venue.contact"),error:(G=(T=r.venue)==null?void 0:T.contact)==null?void 0:G.message,placeholder:"Email or phone"}),e.jsx(i,{label:"Performance Date & Time",type:"datetime-local",...l("date"),error:(D=r.date)==null?void 0:D.message}),e.jsx(i,{label:"Call Time (optional)",type:"datetime-local",...l("callTime"),error:(M=r.callTime)==null?void 0:M.message}),e.jsx(i,{label:"Compensation Amount (optional)",type:"number",step:"0.01",...l("compensation.amount",{valueAsNumber:!0}),error:(A=(k=r.compensation)==null?void 0:k.amount)==null?void 0:A.message,placeholder:"0.00"}),e.jsx(X,{label:"Notes (optional)",...l("notes"),error:(F=r.notes)==null?void 0:F.message,placeholder:"Any additional details...",rows:3}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(h,{type:"button",variant:"ghost",onClick:t,className:"flex-1",children:"Cancel"}),e.jsx(h,{type:"submit",variant:"primary",className:"flex-1",children:"Create"})]})]})})]})}export{ie as default};
