import{c as y,j as e,L as m,r as C,a as v,d as g,u as U}from"./index-B-6H1DbC.js";import{u as S,B as k,f as N,a as D,b as w,c as T,d as L,e as j}from"./Button-BYcCY_pn.js";import{C as f}from"./Card-D71wzUUu.js";import{f as R}from"./formatDistanceToNow-CbYUy4z5.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function W(){const n=S(),l=new Date,a=new Date(l.getTime()+7*24*60*60*1e3),r=n.filter(s=>{const t=new Date(s.date);return t>=l&&t<=a});return e.jsx(f,{title:"Upcoming Events",subtitle:"Next 7 days",children:r.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-sm opacity-60 mb-4",children:"No upcoming events. Create one!"}),e.jsx(m,{to:"/rehearsals",className:"text-primary text-sm font-medium hover:underline",children:"View all events â†’"})]}):e.jsxs("div",{className:"space-y-3",children:[r.slice(0,5).map(s=>{const t=new Date(s.date),c=R(t,{addSuffix:!0});return e.jsx(m,{to:`/${s.type==="rehearsal"?"rehearsals":"gigs"}/${s.id}`,className:"block p-3 rounded-lg hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(k,{variant:s.type==="rehearsal"?"info":"success",size:"sm",children:s.type}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.type==="rehearsal"?"eventName"in s?s.eventName:"":"venue"in s?s.venue.name:""})]}),e.jsxs("p",{className:"text-xs opacity-60",children:[N(s.date,"EEE, MMM d")," at ",N(s.date,"h:mm a")]})]}),e.jsx("div",{className:"text-xs opacity-40 whitespace-nowrap",children:c})]})},s.id)}),r.length>5&&e.jsxs(m,{to:"/rehearsals",className:"block text-center text-sm text-primary py-2 hover:underline",children:["View ",r.length-5," more â†’"]})]})})}const M=C.forwardRef(({className:n,label:l,indeterminate:a=!1,checked:r,id:s,...t},c)=>{const o=s||`checkbox-${Math.random().toString(36).substr(2,9)}`;return e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("input",{ref:c,type:"checkbox",id:o,checked:r,className:"sr-only peer",...t}),e.jsxs("div",{className:v("w-5 h-5 rounded border-2 transition-all duration-200 flex items-center justify-center","peer-focus-visible:ring-2 peer-focus-visible:ring-primary/50 peer-focus-visible:ring-offset-2 peer-focus-visible:ring-offset-background","peer-checked:bg-primary peer-checked:border-primary","peer-disabled:opacity-50 peer-disabled:cursor-not-allowed",!r&&!a&&"border-foreground/30 bg-transparent",a&&"bg-primary border-primary",n),children:[r&&!a&&e.jsx($,{size:14,className:"text-primary-foreground"}),a&&e.jsx(E,{size:14,className:"text-primary-foreground"})]})]}),l&&e.jsx("label",{htmlFor:o,className:"text-sm font-medium text-foreground cursor-pointer select-none pt-0.5",children:l})]})});M.displayName="Checkbox";function F(){const{rehearsals:n,updateRehearsal:l}=D(),a=n.flatMap(s=>s.tasks.filter(t=>t.status==="open").map(t=>({...t,rehearsal:s}))),r=async(s,t)=>{t.preventDefault();const c=s.rehearsal.tasks.map(o=>o.id===s.id?{...o,status:"closed"}:o);await l({...s.rehearsal,tasks:c})};return e.jsx(f,{title:"Open Tasks",subtitle:`${a.length} remaining`,children:a.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-sm opacity-60 mb-4",children:"All caught up! ðŸŽ‰"}),e.jsx(m,{to:"/rehearsals",className:"text-primary text-sm font-medium hover:underline",children:"View rehearsals â†’"})]}):e.jsxs("div",{className:"space-y-2",children:[a.slice(0,8).map(s=>e.jsx(m,{to:`/rehearsals/${s.rehearsal.id}`,className:"block p-3 rounded-lg hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"pt-0.5",children:e.jsx(M,{checked:!1,onChange:t=>r(s,t),"aria-label":`Mark "${s.title}" as complete`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsx("p",{className:"text-xs opacity-60 truncate",children:s.rehearsal.eventName}),s.note&&e.jsx("p",{className:"text-xs opacity-40 mt-1 line-clamp-1",children:s.note})]})]})},`${s.rehearsal.id}-${s.id}`)),a.length>8&&e.jsxs(m,{to:"/rehearsals",className:"block text-center text-sm text-primary py-2 hover:underline",children:["View ",a.length-8," more tasks â†’"]})]})})}function b({label:n,value:l,trend:a,trendValue:r,icon:s,className:t}){const c={up:A,down:G,neutral:E},o={up:"text-success",down:"text-error",neutral:"text-foreground/50"},x=a?c[a]:null;return e.jsxs("div",{className:v("flex items-start gap-3",t),children:[s&&e.jsx("div",{className:"p-2 bg-primary/20 rounded-lg text-primary",children:s}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-foreground/60 mb-1",children:n}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:l}),a&&r&&x&&e.jsxs("div",{className:v("flex items-center gap-1 text-sm font-medium",o[a]),children:[e.jsx(x,{size:16}),e.jsx("span",{children:r})]})]})]})]})}function I(){const{gigs:n}=w(),{settings:l}=T(),a=new Date,r=new Date(a.getFullYear(),a.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth()+1,0),t=n.filter(i=>{if(!i.compensation)return!1;const d=new Date(i.date);return d>=r&&d<=s}),c=t.reduce((i,d)=>{var p;return i+(((p=d.compensation)==null?void 0:p.amount)||0)},0),o=t.filter(i=>{var d;return((d=i.compensation)==null?void 0:d.status)==="paid"}).reduce((i,d)=>{var p;return i+(((p=d.compensation)==null?void 0:p.amount)||0)},0),x=c-o,h=l.currency||"USD",u=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:h}).format(i);return e.jsx(f,{title:"Earnings This Month",subtitle:a.toLocaleDateString("en-US",{month:"long",year:"numeric"}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{label:"Total",value:u(c)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Paid",value:u(o)}),e.jsx(b,{label:"Pending",value:u(x)})]}),t.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[e.jsx("p",{className:"text-xs opacity-60 mb-2",children:"Recent gigs"}),e.jsx("div",{className:"space-y-2",children:t.slice(0,3).map(i=>{var d;return e.jsxs(m,{to:`/gigs/${i.id}`,className:"flex items-center justify-between p-2 rounded hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"text-sm truncate",children:i.venue.name}),e.jsx("span",{className:"text-sm font-medium",children:u(((d=i.compensation)==null?void 0:d.amount)||0)})]},i.id)})})]}),e.jsx(m,{to:"/gigs",className:"block text-center text-sm text-primary py-2 hover:underline",children:"View all gigs â†’"})]})})}function B(){const{gigs:n}=w(),{settings:l}=T(),a=new Date,r=n.filter(t=>new Date(t.date)>=a&&t.venue.address).sort((t,c)=>t.date.localeCompare(c.date)).slice(0,5),s=!!l.homeAddress;return e.jsx(f,{title:"Upcoming Travel",subtitle:"Gigs with location",children:r.length===0?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("p",{className:"text-sm opacity-60 mb-4",children:"No upcoming travel scheduled"}),e.jsx(m,{to:"/gigs",className:"text-primary text-sm font-medium hover:underline",children:"View gigs â†’"})]}):e.jsxs("div",{className:"space-y-3",children:[!s&&e.jsx("div",{className:"p-3 rounded-lg bg-warning/10 border border-warning/20",children:e.jsxs("p",{className:"text-xs text-warning",children:["Set your home address in"," ",e.jsx(m,{to:"/settings",className:"underline",children:"settings"})," ","to calculate distances"]})}),r.map(t=>e.jsxs(m,{to:`/gigs/${t.id}`,className:"block p-3 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:t.venue.name}),e.jsxs("p",{className:"text-xs opacity-60",children:[N(t.date,"EEE, MMM d")," at ",N(t.date,"h:mm a")]})]}),e.jsx(k,{variant:"info",size:"sm",children:t.status})]}),e.jsx("p",{className:"text-xs opacity-40 truncate",children:t.venue.address}),t.mileage&&e.jsxs("p",{className:"text-xs opacity-60 mt-1",children:["~",t.mileage.toFixed(1)," miles"]})]},t.id)),e.jsx(m,{to:"/gigs",className:"block text-center text-sm text-primary py-2 hover:underline",children:"View all gigs â†’"})]})})}const O=async()=>{try{const[n,l,a,r]=await Promise.all([g.rehearsals.toArray(),g.gigs.toArray(),g.rehearsalTemplates.toArray(),g.mileageLogs.toArray()]);return{version:g.verno,timestamp:Date.now(),data:{rehearsals:n,gigs:l,rehearsalTemplates:a,mileageLogs:r}}}catch(n){throw console.error("Error exporting database:",n),n}},V=async(n="soundcheck-backup.json")=>{try{const l=await O(),a=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=n,s.click(),URL.revokeObjectURL(r)}catch(l){throw console.error("Error downloading database:",l),l}},z=async()=>{const n=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);await V(`soundcheck-backup-${n}.json`)};function H(){const n=U(),{openModal:l}=L(),a=()=>{l("create-rehearsal"),n("/rehearsals")},r=()=>{l("create-gig"),n("/gigs")},s=async()=>{try{await z(),console.log("Data exported successfully")}catch(t){console.error("Failed to export data:",t)}};return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(j,{variant:"primary",onClick:a,className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸŽµ"}),"New Rehearsal"]}),e.jsxs(j,{variant:"primary",onClick:r,className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸŽ¤"}),"New Gig"]}),e.jsxs(j,{variant:"secondary",onClick:()=>n("/rehearsals"),className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ“…"}),"Calendar"]}),e.jsxs(j,{variant:"ghost",onClick:s,className:"w-full",children:[e.jsx("span",{className:"text-lg mr-2",children:"ðŸ’¾"}),"Export"]})]})}function q(){const{rehearsals:n}=D(),{gigs:l}=w(),a=new Date,r=new Date(a.getTime()+7*24*60*60*1e3),s=n.filter(x=>{const h=new Date(x.date);return h>=a&&h<=r}).length,t=l.filter(x=>new Date(x.date)>=a).length,c=a.getHours(),o=c<12?"Good morning":c<18?"Good afternoon":"Good evening";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"glass rounded-xl p-6 md:p-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:[o,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-lg opacity-80 mb-6",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-xs opacity-40",children:"rehearsals"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-xs opacity-40",children:"gigs"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length}),e.jsx("p",{className:"text-xs opacity-40",children:"rehearsals"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[e.jsx("p",{className:"text-sm opacity-60 mb-1",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:l.length}),e.jsx("p",{className:"text-xs opacity-40",children:"gigs"})]})]}),e.jsx(H,{})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(W,{})}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(F,{})}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(I,{})}),e.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:e.jsx(B,{})})]})]})}export{q as default};
